
openapi: 3.0.0
info:
  title: Norruva DPP API
  version: v1
  description: Conceptual API endpoints for managing Digital Product Passports.
paths:
  /api/v1/dpp/{productId}:
    get:
      operationId: getDppById
      summary: Retrieve a Digital Product Passport
      description: Fetches the complete Digital Product Passport for a specific product.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DigitalProductPassport'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      operationId: updateDpp
      summary: Update a Digital Product Passport
      description: Updates an existing Digital Product Passport. You can send partial or full updates.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the DPP to update.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDppRequestBody'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DigitalProductPassport'
        '400':
          description: Invalid input data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      operationId: archiveDpp
      summary: Archive a Digital Product Passport
      description: Archives an existing Digital Product Passport by setting its status to 'archived'.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the DPP to archive.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Product with ID DPP001 has been archived successfully.
                  status:
                    type: string
                    example: Archived
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp:
    get:
      operationId: listDpps
      summary: List Digital Product Passports
      description: Retrieves a list of DPPs, with optional filtering.
      parameters:
        - name: status
          in: query
          required: false
          description: Filter by DPP status (e.g., draft, published, archived).
          schema:
            type: string
            enum: ["draft", "published", "archived", "pending_review", "revoked", "flagged", "all"]
            default: "all"
        - name: category
          in: query
          required: false
          description: Filter by product category.
          schema:
            type: string
        - name: searchQuery
          in: query
          required: false
          description: Search term for product name, ID, GTIN, or manufacturer.
          schema:
            type: string
        - name: blockchainAnchored
          in: query
          required: false
          description: Filter by blockchain anchoring status.
          schema:
            type: string
            enum: ["all", "anchored", "not_anchored"]
            default: "all"
        # Conceptual pagination parameters
        # - name: limit
        #   in: query
        #   schema:
        #     type: integer
        #     default: 20
        # - name: offset
        #   in: query
        #   schema:
        #     type: integer
        #     default: 0
      responses:
        '200':
          description: A list of Digital Product Passports.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/DigitalProductPassport' # Or a summary version
                  filtersApplied:
                    type: object
                  totalCount:
                    type: integer
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      operationId: createDpp
      summary: Create a Digital Product Passport
      description: Creates a new Digital Product Passport with the provided initial data.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDppRequestBody'
      responses:
        '201':
          description: Successful creation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DigitalProductPassport'
        '400':
          description: Invalid input data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/extend/{productId}:
    patch:
      operationId: extendDpp
      summary: Extend a Digital Product Passport
      description: Allows for extending a DPP by adding document references or other modular data.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the DPP to extend.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                documentReference:
                  type: object
                  properties:
                    documentName:
                      type: string
                      description: Name of the document.
                    documentUrl:
                      type: string
                      format: url
                      description: URL to access the document.
                    documentType:
                      type: string
                      description: Type of the document (e.g., "Compliance Certificate", "Technical Manual").
                  required:
                    - documentName
                    - documentUrl
                    - documentType
                chainOfCustodyUpdate: # Conceptual - further definition needed for real use
                  type: object
                  description: "Conceptual: For updating chain of custody information."
                  properties:
                    newOwnerDid:
                      type: string
                    transferTimestamp:
                      type: string
                      format: date-time
      responses:
        '200':
          description: Successful extension
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DigitalProductPassport' # Returns the updated DPP
        '400':
          description: Invalid input data (e.g., missing documentReference).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/custody/{productId}:
    patch:
      operationId: updateCustody
      summary: Update chain of custody
      description: Appends a new custodian entry to the DPP traceability information.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the DPP to update.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                stepName:
                  type: string
                actorDid:
                  type: string
                  description: Decentralized identifier of the actor.
                timestamp:
                  type: string
                  format: date-time
                location:
                  type: string
                  nullable: true
                transactionHash:
                  type: string
                  nullable: true
              required:
                - stepName
                - actorDid
                - timestamp
      responses:
        '200':
          description: Returns the updated DPP
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DigitalProductPassport'
        '400':
          description: Invalid input data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/{productId}/lifecycle-events:
    post:
      operationId: addDppLifecycleEvent
      summary: Add a Lifecycle Event to a DPP
      description: Adds a new lifecycle event to the specified Digital Product Passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                eventType:
                  type: string
                  description: Type of the lifecycle event (e.g., "Manufactured", "Shipped").
                  example: "Shipped"
                location:
                  type: string
                  nullable: true
                  description: Location where the event occurred.
                  example: "Warehouse B"
                details:
                  type: object
                  additionalProperties: true
                  nullable: true
                  description: Custom data related to the event.
                  example: {"orderId": "SO12345"}
                responsibleParty:
                  type: string
                  nullable: true
                  description: Party responsible for the event.
                  example: "Logistics Inc."
              required:
                - eventType
      responses:
        '201':
          description: Lifecycle event added successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LifecycleEvent'
        '400':
          description: Invalid input data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/{productId}/compliance-summary:
    get:
      operationId: getDppComplianceSummary
      summary: Retrieve Compliance Summary for a DPP
      description: Fetches a summary of the compliance status for a specific product.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  productId:
                    type: string
                  productName:
                    type: string
                  overallStatus:
                    type: string
                    enum: ["Fully Compliant", "Pending Review", "Non-Compliant", "Review Needed", "N/A", "No Data"]
                  eprelStatus:
                    type: string
                    nullable: true
                  ebsiVerificationStatus:
                    type: string
                    nullable: true
                  batteryRegulationStatus:
                    type: string
                    nullable: true
                  esprStatus:
                    type: string
                    nullable: true
                  scipStatus:
                    type: string
                    nullable: true
                  customsDataStatus:
                    type: string
                    nullable: true
                  lastChecked:
                    type: string
                    format: date-time
                  details:
                    type: object
                    properties:
                      eprel:
                        type: object
                        nullable: true
                        properties:
                          id: { type: string, nullable: true }
                          status: { type: string }
                          url: { type: string, nullable: true }
                          lastChecked: { type: string, format: "date-time"}
                      ebsi:
                        type: object
                        nullable: true
                        properties:
                          status: { type: string }
                          verificationId: { type: string, nullable: true }
                          transactionUrl: { type: string, nullable: true }
                          lastChecked: { type: string, format: "date-time" }
                      batteryRegulation:
                        type: object
                        nullable: true
                        properties:
                          status: { type: string }
                      esprConformity:
                        type: object
                        nullable: true
                        properties:
                          status: { type: string }
                      euEspr:
                        type: object
                        nullable: true
                        properties:
                          status: { type: string }
                      usScope3:
                        type: object
                        nullable: true
                        properties:
                          status: { type: string }
                      scipNotification:
                        type: object
                        nullable: true
                        properties:
                          status: { type: string }
                          notificationId: { type: string, nullable: true }
                          lastChecked: { type: string, format: "date-time" }
                      euCustomsData:
                        type: object
                        nullable: true
                        properties:
                          status: { type: string }
                          declarationId: { type: string, nullable: true }
                          lastChecked: { type: string, format: "date-time" }
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/{productId}/credential:
    get:
      operationId: getDppCredential
      summary: Retrieve Verifiable Credential for a DPP
      description: Returns a verifiable credential (VC) representation of the Digital Product Passport for the specified product.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DppCredential'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/verify/{productId}:
    post:
      operationId: verifyDppById
      summary: Verify a Digital Product Passport
      description: Performs compliance and authenticity checks on a specific DPP.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product to verify.
          schema:
            type: string
      responses:
        '200':
          description: Verification result.
          content:
            application/json:
              schema:
                type: object
                properties:
                  productId:
                    type: string
                  verificationStatus:
                    type: string
                    enum: ["Verified", "VerificationFailed", "PendingFurtherChecks", "ProductNotFound"]
                  message:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
                  checksPerformed:
                    type: array
                    items:
                      type: string
                    example: ["Mock Data Integrity Check", "Mock EBSI Anchor Verification"]
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/anchor/{productId}:
    post:
      operationId: anchorDpp
      summary: Anchor a Digital Product Passport
      description: Creates a blockchain anchor for the specified DPP.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product to anchor.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                platform:
                  type: string
                  description: Blockchain or anchoring platform name.
              required:
                - platform
      responses:
        '200':
          description: DPP anchored successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DigitalProductPassport'
        '400':
          description: Invalid input data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/history/{productId}:
    get:
      operationId: getDppHistoryById
      summary: Retrieve History/Audit Trail for a DPP
      description: Fetches the history of changes and events for a specific Digital Product Passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HistoryEntry'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/import:
    post:
      operationId: importDpps
      summary: Batch Import Digital Product Passports
      description: Allows for batch creation or update of DPPs from an uploaded file or data payload.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fileType:
                  type: string
                  description: Type of the import file (e.g., "csv", "json").
                  example: "csv"
                data: 
                  type: string
                  description: The data to import (e.g., base64 string of file content or structured JSON data).
                  example: "UEsDBAoAAAAA..." 
                sourceDescription:
                  type: string
                  nullable: true
                  description: Optional description of the import source.
              required:
                - fileType
                - data
      responses:
        '200': 
          description: Import job acknowledged or completed.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: string
                    enum: ["PendingProcessing", "Completed", "Failed"]
                  jobId:
                    type: string
                    nullable: true
                  fileTypeReceived:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Invalid input data (e.g., missing fileType or data).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error during import.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/import/jobs/{jobId}:
    get:
      operationId: getImportJobStatus
      summary: Retrieve Batch Import Job Status
      description: Returns the current status of a batch import job.
      parameters:
        - name: jobId
          in: path
          required: true
          description: Identifier of the import job.
          schema:
            type: string
      responses:
        '200':
          description: Current status information.
          content:
            application/json:
              schema:
                type: object
                properties:
                  jobId:
                    type: string
                  status:
                    type: string
                    enum: ["PendingProcessing", "Completed", "Failed"]
                  message:
                    type: string
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Job not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/graph/{productId}:
    get:
      operationId: getDppGraphData
      summary: Retrieve Graph Data for a DPP
      description: Fetches graph data (nodes and edges) for visualizing the supply chain or lifecycle related to a DPP.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DppGraphResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/status/{productId}:
    get:
      operationId: getDppStatusById
      summary: Retrieve the Status of a Digital Product Passport
      description: Fetches the current status of a specific Digital Product Passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DppStatusResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      '500':
        description: Internal server error.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/transfer-ownership/{productId}:
    post:
      operationId: transferDppOwnership
      summary: Transfer Ownership of a Digital Product Passport
      description: Updates ownership information for the specified DPP.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                newOwner:
                  type: object
                  properties:
                    name:
                      type: string
                    did:
                      type: string
                      nullable: true
                transferTimestamp:
                  type: string
                  format: date-time
              required:
                - newOwner
                - transferTimestamp
      responses:
        '200':
          description: Ownership transferred successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DigitalProductPassport'
        '400':
          description: Invalid input data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/dpp/{productId}/issue-auth-vc:
    post:
      operationId: issueDppAuthVc
      summary: Issue Authentication Verifiable Credential for a DPP
      description: Conceptually issues an authentication Verifiable Credential (VC) for the specified product and associates its ID with the DPP.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Authentication VC conceptually issued and linked.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Authentication VC conceptually issued for product DPP001."
                  productId:
                    type: string
                  authenticationVcId:
                    type: string
                    example: "vc_auth_DPP001_mock123"
                  updatedProduct:
                    $ref: '#/components/schemas/DigitalProductPassport'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/dpp/{productId}/link-nft:
    post:
      operationId: linkDppOwnershipNft
      summary: Link Ownership NFT to a DPP
      description: Conceptually links an NFT representing product ownership to the specified Digital Product Passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OwnershipNftLinkRequestBody'
      responses:
        '200':
          description: Ownership NFT conceptually linked to the DPP.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Ownership NFT conceptually linked for product DPP001."
                  productId:
                    type: string
                  ownershipNftLink:
                    $ref: '#/components/schemas/OwnershipNftLink'
                  updatedProduct:
                    $ref: '#/components/schemas/DigitalProductPassport'
        '400':
          description: Invalid input data (e.g., missing contractAddress or tokenId).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /api/v1/dpp/{productId}/onchain-status:
    post:
      operationId: updateDppOnChainStatus
      summary: Update DPP On-Chain Status (Conceptual)
      description: Conceptually updates the on-chain status of a Digital Product Passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOnChainStatusRequest'
      responses:
        '200':
          description: On-chain status conceptually updated.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  updatedProduct:
                    $ref: '#/components/schemas/DigitalProductPassport'
                example:
                  message: "Conceptual on-chain status for product DPP001 updated to 'active'. Mock Tx: 0xmock_tx_hash_123"
                  updatedProduct: 
                    $ref: '#/components/schemas/DigitalProductPassport/example' 
        '400':
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /api/v1/dpp/{productId}/onchain-lifecycle-stage: 
    post:
      operationId: updateDppOnChainLifecycleStage
      summary: Update DPP On-Chain Lifecycle Stage (Conceptual)
      description: Conceptually updates the on-chain lifecycle stage of a Digital Product Passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOnChainLifecycleStageRequest'
      responses:
        '200':
          description: On-chain lifecycle stage conceptually updated.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  updatedProduct:
                    $ref: '#/components/schemas/DigitalProductPassport'
                example:
                  message: "Conceptual on-chain lifecycle stage for product DPP001 updated to 'Manufacturing'. Mock Tx: 0xlifecycle_update_abc"
                  updatedProduct: 
                    $ref: '#/components/schemas/DigitalProductPassport/example' 
        '400':
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/dpp/{productId}/log-critical-event:
    post:
      operationId: logDppCriticalEvent
      summary: Log Critical Event for a DPP (Conceptual)
      description: Conceptually logs a critical event on-chain for a specified DPP.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LogCriticalEventRequest'
      responses:
        '200':
          description: Critical event conceptually logged.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Critical event logged for product DPP001. Mock Tx: 0xmock_critical_tx_456"
                  updatedProduct:
                    $ref: '#/components/schemas/DigitalProductPassport'
        '400':
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/dpp/{productId}/register-vc-hash: 
    post:
      operationId: registerDppVcHash
      summary: Register Verifiable Credential Hash (Conceptual)
      description: Conceptually registers a Verifiable Credential's hash on-chain for a DPP.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterVcHashRequest'
      responses:
        '200':
          description: VC Hash conceptually registered.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  updatedProduct:
                    $ref: '#/components/schemas/DigitalProductPassport'
                example:
                  message: "VC Hash for ID 'vc_id_example' conceptually registered for product DPP001. Mock Tx: 0xvc_hash_tx_123"
                  updatedProduct:
                    $ref: '#/components/schemas/DigitalProductPassport/example'
        '400':
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/token/mint/{productId}:
    post:
      operationId: mintDppToken
      summary: Mint DPP Token
      description: Mints a blockchain token representing the specified Digital Product Passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MintTokenRequest'
      responses:
        '201':
          description: Token minted successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MintTokenResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/token/metadata/{tokenId}:
    patch:
      operationId: updateTokenMetadata
      summary: Update Token Metadata
      description: Updates on-chain metadata URI for a minted DPP token.
      parameters:
        - name: tokenId
          in: path
          required: true
          description: The blockchain token ID.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTokenMetadataRequest'
      responses:
        '200':
          description: Metadata updated.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateTokenMetadataResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Token not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/token/status/{tokenId}:
    get:
      operationId: getTokenStatus
      summary: Retrieve Token On-Chain Status
      description: Retrieves on-chain information for a DPP token.
      parameters:
        - name: tokenId
          in: path
          required: true
          description: The blockchain token ID.
          schema:
            type: string
      responses:
        '200':
          description: On-chain status information.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenStatusResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Token not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/qr/generate/{productId}:
    get:
      operationId: generateQrCode
      summary: Generate QR Code for a Product
      description: Returns JSON containing a data URL for a PNG QR code image that links to the product's public passport.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
            example: DPP001
      responses:
        '200':
          description: JSON containing the QR code as a data URL.
          content:
            application/json:
              schema:
                type: object
                properties:
                  qrCode:
                    type: string
                    description: Data URL for a PNG image.
                    example: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAAB...
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/qr/validate:
    post:
      operationId: validateQrCode
      summary: Validate QR Code & Retrieve DPP Summary
      description: Validates a unique identifier (typically from a QR code) and retrieves a summary of the product passport.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - qrIdentifier
              properties:
                qrIdentifier:
                  type: string
                  description: The unique identifier extracted from the QR code.
                  example: DPP001
      responses:
        '200':
          description: Successful validation
          content:
            application/json:
              schema:
                type: object
                properties:
                  productId:
                    type: string
                  productName:
                    type: string
                  category:
                    type: string
                  manufacturer:
                    type: string
                  verificationStatus:
                    type: string
                    example: valid_dpp_found
                  dppUrl:
                    type: string
                    example: /passport/DPP001
                  ebsiCompliance:
                    type: object
                    properties:
                      status:
                        type: string
                        example: verified
                      verificationId:
                        type: string
                        nullable: true
                  blockchainAnchor:
                    type: object
                    properties:
                      transactionHash:
                        type: string
                        nullable: true
                      platform:
                        type: string
                        nullable: true
        '400':
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: QR identifier invalid or product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/qr/{productId}:
    get:
      operationId: getQrCode
      summary: Generate QR Code for Product
      description: Returns a QR code image linking to the public passport for the specified product.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: QR code image
          content:
            image/png:
              schema:
                type: string
                format: binary
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/dpp/country-stats:
    get:
      operationId: getDppCountryStats
      summary: Retrieve DPP counts by country
      description: Returns the number of Digital Product Passports for each country.
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    countryCode:
                      type: string
                    count:
                      type: integer
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # --- Private Layer API Endpoints (Conceptual) ---
  /api/v1/private/dpp/{productId}/supplier/{supplierId}/attestations:
    get:
      operationId: getPrivateSupplierAttestations
      summary: Retrieve Private Supplier Attestations
      description: >
        [Private Layer - Conceptual] Fetches detailed, potentially sensitive attestations from a specific supplier for a given product.
        Access to this endpoint would conceptually require a higher level of authentication and specific permissions beyond standard API key.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
        - name: supplierId
          in: path
          required: true
          description: The unique identifier of the supplier.
          schema:
            type: string
      responses:
        '200':
          description: Successful response with attestations.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DetailedSupplierAttestation'
        '401':
          description: API key missing or invalid / Insufficient permissions for private data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product or Supplier not found, or no attestations available.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/private/dpp/{productId}/component-transfer:
    post:
      operationId: recordPrivateComponentTransfer
      summary: Record Private B2B Component Transfer
      description: >
        [Private Layer - Conceptual] Records the transfer of a component or sub-assembly between two verified entities within a private supply chain network.
        Access to this endpoint would conceptually require robust B2B authentication.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product the component is associated with.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/B2BComponentTransferRecord'
      responses:
        '201':
          description: Component transfer recorded successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/B2BComponentTransferRecord' # Return the created record
        '400':
          description: Invalid input data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication failed or insufficient permissions for private data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/private/dpp/{productId}/confidential-materials:
    get:
      operationId: getPrivateConfidentialMaterials
      summary: Retrieve Private Confidential Material Details
      description: >
        [Private Layer - Conceptual] Fetches highly detailed or proprietary material composition information that is not suitable for the public DPP.
        Access to this endpoint would require strict, permissioned access.
      parameters:
        - name: productId
          in: path
          required: true
          description: The unique identifier of the product.
          schema:
            type: string
      responses:
        '200':
          description: Successful response with confidential material details.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfidentialMaterialComposition'
        '401':
          description: API key missing or invalid / Insufficient permissions for confidential data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found or no confidential material data available.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # --- Zero-Knowledge Proof Layer API Endpoints (Highly Conceptual) ---
  /api/v1/zkp/submit-proof/{dppId}:
    post:
      operationId: submitZkpForDpp
      summary: Submit Zero-Knowledge Proof for a DPP
      description: >
        [ZKP Layer - Highly Conceptual] Allows a prover (e.g., manufacturer, supplier) to submit a Zero-Knowledge Proof (ZKP) related to a specific DPP.
        This endpoint is a placeholder for a complex ZKP system interaction. The actual proof format and validation logic would depend on the chosen ZKP scheme (e.g., zk-SNARKs, zk-STARKs) and are not implemented in this mock.
        This mock only acknowledges receipt.
      parameters:
        - name: dppId
          in: path
          required: true
          description: The unique identifier of the Digital Product Passport this proof relates to.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ZkpSubmissionRequest'
      responses:
        '202':
          description: ZKP submission acknowledged for conceptual processing.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ZkpSubmissionResponse'
        '400':
          description: Invalid request body (e.g., missing claimType or proofData).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: DPP with the given dppId not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/zkp/verify-claim/{dppId}:
    get:
      operationId: verifyZkpClaimForDpp
      summary: Verify Claim with ZKP for a DPP
      description: >
        [ZKP Layer - Highly Conceptual] Allows a verifier to check if a specific claim for a DPP has a valid (mock) Zero-Knowledge Proof associated with it.
        This endpoint simulates the verification check. Actual ZKP verification is not performed.
      parameters:
        - name: dppId
          in: path
          required: true
          description: The unique identifier of the Digital Product Passport.
          schema:
            type: string
        - name: claimType
          in: query
          required: true
          description: The type of claim to verify (e.g., "material_compliance_svhc_x", "ethical_sourcing_region_y").
          schema:
            type: string
      responses:
        '200':
          description: ZKP claim verification status (mock).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ZkpVerificationResponse'
        '400':
          description: Invalid query parameters (e.g., missing claimType).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: API key missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: DPP or specified claim proof not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: integer
            message:
              type: string
    DppStatusResponse:
      type: object
      properties:
        productId:
          type: string
          description: The unique identifier of the product.
        status:
          type: string
          description: The current status of the Digital Product Passport.
          enum: ["draft", "published", "archived", "pending_review", "revoked", "flagged"]
    DppGraphNode:
      type: object
      properties:
        id: { type: string }
        label: { type: string }
        type: { type: string, enum: ["product", "manufacturer", "supplier", "lifecycle_event", "component"] }
        data: { type: object, additionalProperties: true, nullable: true }
    DppGraphEdge:
      type: object
      properties:
        id: { type: string }
        source: { type: string, description: "ID of the source node" }
        target: { type: string, description: "ID of the target node" }
        label: { type: string, description: "Description of the relationship" }
        data: { type: object, additionalProperties: true, nullable: true }
    DppGraphResponse:
      type: object
      properties:
        nodes:
          type: array
          items:
            $ref: '#/components/schemas/DppGraphNode'
        edges:
          type: array
          items:
            $ref: '#/components/schemas/DppGraphEdge'
    DocumentReference:
      type: object
      properties:
        name:
          type: string
          description: The name of the document.
        url:
          type: string
          format: url
          description: A URL pointing to the document.
        type:
          type: string
          description: The type of document (e.g., "User Manual", "Safety Certificate").
        addedTimestamp:
          type: string
          format: date-time
          description: Timestamp when the document reference was added.
    HistoryEntry: 
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the historical event.
        actionType:
          type: string
          description: Type of action performed (e.g., "DPP Created", "Lifecycle Event: Shipped").
        details:
          type: string
          nullable: true
          description: Additional details about the event.
        changedBy:
          type: string
          description: User or system that made the change.
        version:
          type: integer
          nullable: true
          description: Conceptual version number of the DPP after this change.
    OwnershipNftLink: # Schema for Ownership NFT Link object
      type: object
      properties:
        registryUrl:
          type: string
          format: url
          nullable: true
          description: URL to the NFT on a marketplace or registry (e.g., OpenSea).
        contractAddress:
          type: string
          description: Blockchain address of the NFT contract.
        tokenId:
          type: string
          description: Unique identifier of the NFT.
        chainName:
          type: string
          nullable: true
          description: Name of the blockchain (e.g., Ethereum, Polygon).
      required:
        - contractAddress
        - tokenId
    OwnershipNftLinkRequestBody: # Request body schema for linking NFT
      type: object
      properties:
        registryUrl:
          type: string
          format: url
          nullable: true
          description: URL to the NFT on a marketplace or registry.
        contractAddress:
          type: string
          description: Blockchain address of the NFT contract.
        tokenId:
          type: string
          description: Unique identifier of the NFT.
        chainName:
          type: string
          nullable: true
          description: Name of the blockchain.
      required:
        - contractAddress
        - tokenId
    DigitalProductPassport:
      type: object
      properties:
        id:
          type: string
        version:
          type: integer
          nullable: true
        productName:
          type: string
        category:
          type: string
        gtin:
          type: string
          nullable: true
        modelNumber:
          type: string
          nullable: true
        manufacturer:
          type: object
          nullable: true
          properties:
            name:
              type: string
            did:
              type: string
              nullable: true
            address:
              type: string
              nullable: true
            eori: 
              type: string
              nullable: true
              description: Economic Operators Registration and Identification number.
        metadata:
          type: object
          properties:
            created_at:
              type: string
              format: date-time
              nullable: true
            last_updated:
              type: string
              format: date-time
            status:
              type: string
              enum:
                - draft
                - published
                - archived
                - pending_review
                - revoked
                - flagged
            dppStandardVersion:
              type: string
              nullable: true
            dataSchemaVersion:
              type: string
              nullable: true
            onChainStatus: 
              type: string
              nullable: true
              description: "Conceptual on-chain status of the DPP (e.g., active, recalled)."
            onChainLifecycleStage: 
              type: string
              nullable: true
              description: "Conceptual on-chain lifecycle stage of the DPP."
        blockchainIdentifiers:
          type: object
          nullable: true
          properties:
            platform:
              type: string
              nullable: true
            contractAddress:
              type: string
              nullable: true
            tokenId:
              type: string
              nullable: true
            anchorTransactionHash:
              type: string
              nullable: true
        authenticationVcId: 
          type: string
          nullable: true
          description: Identifier for a Verifiable Credential attesting to product authenticity.
        ownershipNftLink: 
          $ref: '#/components/schemas/OwnershipNftLink'
          nullable: true
          description: Link to an NFT representing product ownership.
        productDetails:
          type: object
          nullable: true
          properties:
            description:
              type: string
              nullable: true
            imageUrl:
              type: string
              nullable: true
            imageHint:
              type: string
              nullable: true
            materials:
              type: array
              nullable: true
              items:
                type: object
                properties:
                  name:
                    type: string
                  percentage:
                    type: number
                    nullable: true
                  origin:
                    type: string
                    nullable: true
                  isRecycled:
                    type: boolean
                    nullable: true
                  recycledContentPercentage:
                     type: number
                     nullable: true
            sustainabilityClaims:
              type: array
              nullable: true
              items:
                type: object
                properties:
                  claim:
                    type: string
                  evidenceVcId:
                    type: string
                    nullable: true
                  verificationDetails:
                    type: string
                    nullable: true
            energyLabel:
              type: string
              nullable: true
            repairabilityScore:
              type: object
              nullable: true
              properties:
                value:
                  type: number
                scale:
                  type: number
                reportUrl:
                  type: string
                  nullable: true
                vcId:
                  type: string
                  nullable: true
            recyclabilityInformation:
              type: object
              nullable: true
              properties:
                instructionsUrl:
                  type: string
                  nullable: true
                recycledContentPercentage:
                  type: number
                  nullable: true
                designForRecycling:
                  type: boolean
                  nullable: true
                vcId:
                  type: string
                  nullable: true
            specifications: 
              type: string
              description: "A JSON string representing key-value technical specifications."
              example: "{\"color\": \"blue\", \"weight\": \"250g\"}"
              nullable: true
            customAttributes:
              type: array
              nullable: true
              items:
                $ref: '#/components/schemas/CustomAttribute'
        textileInformation:
          $ref: '#/components/schemas/TextileInformation'
          nullable: true
        constructionProductInformation:
          $ref: '#/components/schemas/ConstructionProductInformation'
          nullable: true
        lifecycleEvents:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/LifecycleEvent'
        certifications:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/Certification'
        documents: 
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/DocumentReference'
        traceability:
          $ref: '#/components/schemas/TraceabilityInfo'
          nullable: true
        compliance:
          type: object
          properties:
            eprel:
              type: object
              nullable: true
              properties:
                id:
                  type: string
                  nullable: true
                status:
                  type: string
                url:
                  type: string
                  nullable: true
                lastChecked:
                  type: string
                  format: date-time
            esprConformity:
              type: object
              nullable: true
              properties:
                assessmentId:
                  type: string
                  nullable: true
                status:
                  type: string
                  enum:
                    - conformant
                    - non_conformant
                    - pending_assessment
                assessmentDate:
                  type: string
                  format: date-time
                  nullable: true
                vcId:
                  type: string
                  nullable: true
            eu_espr:
              type: object
              nullable: true
              properties:
                status:
                  type: string
                  enum:
                    - compliant
                    - non_compliant
                    - pending
                reportUrl:
                  type: string
                  nullable: true
                vcId:
                  type: string
                  nullable: true
            us_scope3:
              type: object
              nullable: true
              properties:
                status:
                  type: string
                  enum:
                    - compliant
                    - non_compliant
                    - pending
                reportUrl:
                  type: string
                  nullable: true
                vcId:
                  type: string
                  nullable: true
            battery_regulation:
              $ref: '#/components/schemas/BatteryRegulationDetails'
              nullable: true
            scipNotification:
              $ref: '#/components/schemas/ScipNotificationDetails'
              nullable: true
            euCustomsData:
              $ref: '#/components/schemas/EuCustomsDataDetails'
              nullable: true
        ebsiVerification:
          type: object
          nullable: true
          properties:
            status:
              type: string
              enum:
                - verified
                - pending_verification
                - not_verified
                - error
                - N/A
            verificationId:
              type: string
              nullable: true
            lastChecked:
              type: string
              format: date-time
            message:
              type: string
              nullable: true
            issuerDid:
              type: string
              nullable: true
              description: DID of the EBSI credential issuer.
            schema:
              type: string
              nullable: true
              description: Schema of the EBSI verifiable credential.
            issuanceDate:
              type: string
              format: date-time
              nullable: true
        verifiableCredentials:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/VerifiableCredentialReference'
        consumerScans:
          type: integer
          nullable: true
        dataController:
          type: string
          nullable: true
        accessControlPolicyUrl:
          type: string
          format: url
          nullable: true
        privacyPolicyUrl:
          type: string
          format: url
          nullable: true
        supplyChainLinks:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/ProductSupplyChainLink'
      example: 
        id: "DPP001"
        version: 1
        productName: "EcoSmart Refrigerator X500"
        category: "Appliances"
        gtin: "01234567890123"
        modelNumber: "X500-ECO"
        manufacturer:
          name: "GreenTech Appliances"
          did: "did:ebsi:zyxts12345"
        metadata:
          created_at: "2024-01-01T10:00:00Z"
          last_updated: "2024-07-30T10:00:00Z"
          status: "published"
          dppStandardVersion: "CIRPASS v0.9 Draft"
          onChainStatus: "active"
          onChainLifecycleStage: "InUse"
        blockchainIdentifiers:
          platform: "MockChain"
          anchorTransactionHash: "0x123abc..."
          contractAddress: "0xContract123"
          tokenId: "Token789"
        productDetails:
          description: "An eco friendly fridge."
          energyLabel: "A++"
    LifecycleEvent:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
        timestamp:
          type: string
          format: date-time
        location:
          type: string
          nullable: true
        responsibleParty:
          type: string
          nullable: true
        data:
          type: object
          additionalProperties: true
          nullable: true
        transactionHash:
          type: string
          nullable: true
        vcId:
          type: string
          nullable: true
    Certification:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        issuer:
          type: string
        issueDate:
          type: string
          format: date
        expiryDate:
          type: string
          format: date
          nullable: true
        vcId:
          type: string
          nullable: true
        documentUrl:
          type: string
          format: url
          nullable: true
        standard:
          type: string
          nullable: true
        transactionHash:
          type: string
          nullable: true
    TraceabilityInfo:
      type: object
      properties:
        batchId:
          type: string
          nullable: true
        originCountry:
          type: string
          nullable: true
        supplyChainSteps:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/SupplyChainStep'
    SupplyChainStep:
      type: object
      properties:
        stepName:
          type: string
        actorDid:
          type: string
          nullable: true
        timestamp:
          type: string
          format: date-time
        location:
          type: string
          nullable: true
        transactionHash:
          type: string
          nullable: true
    VerifiableCredentialReference:
      type: object
      properties:
        id:
          type: string
        type:
          type: array
          items:
            type: string
        name:
          type: string
          nullable: true
        issuer:
          type: string
        issuanceDate:
          type: string
          format: date-time
        credentialSubject:
          type: object
          additionalProperties: true
        proof:
          type: object
          additionalProperties: true
          nullable: true
        verificationMethod:
          type: string
          nullable: true
    DppCredential:
      type: object
      properties:
        "@context":
          type: array
          items:
            type: string
        id:
          type: string
        type:
          type: array
          items:
            type: string
        issuer:
          type: string
        issuanceDate:
          type: string
          format: date-time
        credentialSubject:
          type: object
          additionalProperties: true
        proof:
          type: object
          additionalProperties: true
          nullable: true
    CustomAttribute:
      type: object
      properties:
        key:
          type: string
        value:
          type: string
    ProductSupplyChainLink:
      type: object
      properties:
        supplierId:
          type: string
        suppliedItem:
          type: string
        notes:
          type: string
          nullable: true
    CreateDppRequestBody:
      type: object
      required:
        - productName
        - category
      properties:
        productName:
          type: string
        category:
          type: string
        gtin:
          type: string
          nullable: true
        manufacturerName:
          type: string
          nullable: true
        modelNumber:
          type: string
          nullable: true
        productDetails:
          type: object
          nullable: true
          properties:
            description:
              type: string
              nullable: true
            materials:
              type: array
              nullable: true
              items:
                type: object
                properties:
                  name:
                    type: string
                  percentage:
                    type: number
                    nullable: true
                  isRecycled:
                    type: boolean
                    nullable: true
            energyLabel:
              type: string
              nullable: true
            specifications:
              type: string
              description: "A JSON string representing key-value technical specifications."
              example: "{\"color\": \"blue\"}"
              nullable: true
            customAttributes:
              type: array
              nullable: true
              items:
                $ref: '#/components/schemas/CustomAttribute'
            imageUrl:
              type: string
              format: url
              nullable: true
            imageHint:
              type: string
              nullable: true
        textileInformation:
          $ref: '#/components/schemas/TextileInformation'
          nullable: true
        constructionProductInformation:
          $ref: '#/components/schemas/ConstructionProductInformation'
          nullable: true
        compliance: # Added compliance section
          type: object
          nullable: true
          properties:
            eprel:
              type: object
              nullable: true
              properties:
                id: { type: string, nullable: true }
                status: { type: string, nullable: true }
                url: { type: string, format: url, nullable: true }
            esprConformity:
              type: object
              nullable: true
              properties:
                assessmentId: { type: string, nullable: true }
                status: { type: string, enum: ['conformant', 'non_conformant', 'pending_assessment'], nullable: true }
                assessmentDate: { type: string, format: "date-time", nullable: true }
                vcId: { type: string, nullable: true }
            scipNotification:
              $ref: '#/components/schemas/ScipNotificationDetails'
              nullable: true
            euCustomsData:
              $ref: '#/components/schemas/EuCustomsDataDetails'
              nullable: true
            battery_regulation:
              $ref: '#/components/schemas/BatteryRegulationDetails'
              nullable: true
    UpdateDppRequestBody:
      type: object
      properties:
        productName:
          type: string
          nullable: true
        category:
          type: string
          nullable: true
        gtin:
          type: string
          nullable: true
        manufacturerName:
          type: string
          nullable: true
        modelNumber:
          type: string
          nullable: true
        metadata:
          type: object
          nullable: true
          properties:
            status:
              type: string
              enum:
                - draft
                - published
                - archived
                - pending_review
                - revoked
                - flagged
              nullable: true
            dppStandardVersion:
              type: string
              nullable: true
            onChainStatus: 
              type: string
              nullable: true
              description: "Conceptual on-chain status of the DPP."
            onChainLifecycleStage: 
              type: string
              nullable: true
              description: "Conceptual on-chain lifecycle stage of the DPP."
        productDetails:
          type: object
          nullable: true
          properties:
            description:
              type: string
              nullable: true
            materials:
              type: array
              nullable: true
              items:
                type: object
                properties:
                  name:
                    type: string
                  percentage:
                    type: number
                    nullable: true
                  isRecycled:
                    type: boolean
                    nullable: true
            sustainabilityClaims:
              type: array
              nullable: true
              items:
                type: object
                properties:
                  claim:
                    type: string
                  verificationDetails:
                    type: string
                    nullable: true
            energyLabel:
              type: string
              nullable: true
            specifications:
              type: string
              description: "A JSON string representing key-value technical specifications."
              nullable: true
            customAttributes:
              type: array
              nullable: true
              items:
                $ref: '#/components/schemas/CustomAttribute'
            imageUrl:
              type: string
              format: url
              nullable: true
            imageHint:
              type: string
              nullable: true
        textileInformation:
          $ref: '#/components/schemas/TextileInformation'
          nullable: true
        constructionProductInformation:
          $ref: '#/components/schemas/ConstructionProductInformation'
          nullable: true
        compliance: 
          type: object 
          nullable: true
          properties:
            eprel:
              type: object # Kept eprel simple as it was
              nullable: true
              properties:
                id: { type: string, nullable: true }
                status: { type: string, nullable: true }
                url: { type: string, format: url, nullable: true } # Corrected format
                lastChecked: { type: string, format: "date-time", nullable: true }
            esprConformity:
              type: object # Kept esprConformity simple
              nullable: true
              properties:
                assessmentId: { type: string, nullable: true }
                status: { type: string, enum: ['conformant', 'non_conformant', 'pending_assessment'], nullable: true }
                assessmentDate: { type: string, format: "date-time", nullable: true }
                vcId: { type: string, nullable: true }
            scipNotification:
              $ref: '#/components/schemas/ScipNotificationDetails' # Using $ref
              nullable: true
            euCustomsData:
              $ref: '#/components/schemas/EuCustomsDataDetails' # Using $ref
              nullable: true
            battery_regulation: 
              $ref: '#/components/schemas/BatteryRegulationDetails' # Using $ref
              nullable: true
        ebsiVerification:
          type: object
          nullable: true
          properties:
            status:
              type: string
              enum:
                - verified
                - pending_verification
                - not_verified
                - error
                - N/A
              nullable: true
            verificationId:
              type: string
              nullable: true
            message:
              type: string
              nullable: true
        documents:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/DocumentReference'
    UpdateOnChainStatusRequest: 
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: ["active", "recalled", "flagged_for_review", "archived"]
          description: The new conceptual on-chain status for the DPP.
    UpdateOnChainLifecycleStageRequest: 
      type: object
      required:
        - lifecycleStage
      properties:
        lifecycleStage:
          type: string
          description: The new conceptual on-chain lifecycle stage for the DPP.
          example: "Manufacturing"
    LogCriticalEventRequest:
      type: object
      required:
        - eventDescription
      properties:
        eventDescription:
          type: string
          description: A description of the critical event.
        severity:
          type: string
          enum: ["High", "Medium", "Low"]
          nullable: true
          description: Severity of the event. Defaults to "High" if not provided by API.
          example: "High"
    RegisterVcHashRequest: 
      type: object
      required:
        - vcId
        - vcHash
      properties:
        vcId:
          type: string
          description: The unique identifier of the Verifiable Credential.
          example: "urn:uuid:abcdef12-3456-7890-abcd-ef1234567890"
        vcHash:
          type: string
          description: The cryptographic hash (e.g., SHA-256) of the Verifiable Credential.
          example: "a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2" # 64 char hex for SHA256
    MintTokenRequest:
      type: object
      required:
        - contractAddress
        - recipientAddress
      properties:
        contractAddress:
          type: string
          description: Smart contract address used for minting.
        recipientAddress:
          type: string
          description: Blockchain address receiving the token.
        metadataUri:
          type: string
          nullable: true
          description: URI for the off-chain metadata.
    MintTokenResponse:
      type: object
      properties:
        tokenId:
          type: string
        contractAddress:
          type: string
        transactionHash:
          type: string
      example:
        tokenId: "101"
        contractAddress: "0xMOCK_DPP_TOKEN_CONTRACT"
        transactionHash: "0xmint_tx_mock_abcdef123456"
    UpdateTokenMetadataRequest:
      type: object
      required:
        - metadataUri
      properties:
        metadataUri:
          type: string
          description: New metadata URI for the token.
        contractAddress:
          type: string
          nullable: true
          description: Contract address if different from default.
    UpdateTokenMetadataResponse:
      type: object
      properties:
        tokenId:
          type: string
        contractAddress:
          type: string
        transactionHash:
          type: string
      example:
        tokenId: "101"
        contractAddress: "0xMOCK_DPP_TOKEN_CONTRACT"
        transactionHash: "0xmeta_update_tx_mock_654321fedcba"
    TokenStatusResponse:
      type: object
      properties:
        tokenId:
          type: string
        contractAddress:
          type: string
        ownerAddress:
          type: string
        mintedAt:
          type: string
          format: date-time
        metadataUri:
          type: string
          nullable: true
        lastTransactionHash:
          type: string
          nullable: true
        status:
          type: string
          description: Current on-chain status of the token.
      example:
        tokenId: "101"
        contractAddress: "0xMOCK_DPP_TOKEN_CONTRACT"
        ownerAddress: "0xRECIPIENT_MOCK_ADDRESS"
        mintedAt: "2024-08-01T10:00:00Z"
        metadataUri: "ipfs://dpp_metadata_for_DPP001"
        lastTransactionHash: "0xlast_tx_mock_randomhash"
        status: "active"
    DetailedSupplierAttestation: # Conceptual Schema for Private Layer
      type: object
      properties:
        attestationId: { type: string, example: "attest_sup001_compA_batchXYZ_20240815" }
        productId: { type: string, example: "DPP001" }
        componentId: { type: string, example: "COMP_A_BATTERY_CELL" }
        supplierId: { type: string, example: "SUP001" }
        supplierDid: { type: string, example: "did:example:supplier:greenpartsinc" }
        attestationType: { type: string, example: "EthicalSourcingCompliance" }
        attestationStatement: { type: string, example: "Component COMP_A_BATTERY_CELL sourced in compliance..." }
        evidence: { type: array, items: { type: object, properties: { type: { type: string }, documentId: { type: string }, documentHash: { type: string }, vcId: { type: string, nullable: true } } } }
        issuanceDate: { type: string, format: "date-time" }
        expiryDate: { type: string, format: "date-time", nullable: true }
        specificMetrics: { type: array, items: { type: object, properties: { metricName: {type: string}, value: {type: "string"}, unit: {type: "string"}, verificationMethod: {type: "string"}}} }
        confidentialNotes: { type: string, nullable: true }
      required:
        - attestationId
        - productId
        - componentId
        - supplierId
        - attestationType
        - attestationStatement
    B2BComponentTransferRecord: # Conceptual Schema for Private Layer
      type: object
      properties:
        transferId: { type: string, example: "transfer_compA_sup001_to_mfg002_20240820" }
        componentId: { type: string, example: "COMP_A_BATTERY_CELL_PACK" }
        batchOrSerialNumbers: { type: array, items: { type: string }, example: ["batch_xyz789-001"] }
        quantity: { type: number, example: 200 }
        unit: { type: string, example: "units" }
        transferDate: { type: string, format: "date-time" }
        fromParty: { type: object, properties: { participantId: {type: string}, participantDid: {type: string}, role: {type: string} } }
        toParty: { type: object, properties: { participantId: {type: string}, participantDid: {type: string}, role: {type: string} } }
        transactionDetails: { type: object, properties: { type: {type: string}, referenceId: {type: string}, privateLedgerTxHash: {type: string, nullable: true} } }
        accompanyingDocuments: { type: array, items: { type: object, properties: { type: {type: string}, documentId: {type: string}, documentHash: {type: string} } } }
        notes: { type: string, nullable: true }
      required:
        - transferId
        - componentId
        - quantity
        - transferDate
        - fromParty
        - toParty
    ConfidentialMaterialComposition: # Conceptual Schema for Private Layer
      type: object
      properties:
        confidentialMaterialId: { type: string, example: "cm_dpp001_proprietary_alloy_X1" }
        productId: { type: string, example: "DPP001" }
        componentName: { type: string, example: "ProtectiveCoating_LayerA" }
        materialName: { type: string, example: "Proprietary Alloy X1-Alpha" }
        composition: { type: array, items: { type: object, properties: { substanceName: {type: string}, casNumber: {type: string}, percentageByWeight: {type: string}, role: {type: string}, notes: {type: string, nullable: true}} } }
        supplierInformation: { type: object, properties: { supplierId: {type: string}, materialBatchId: {type: string} }, nullable: true }
        accessControlList: { type: array, items: { type: string }, example: ["did:example:manufacturer:greentech#internal_rd"] }
        lastUpdated: { type: string, format: "date-time" }
        version: { type: integer }
      required:
        - confidentialMaterialId
        - productId
        - materialName
        - composition
    ZkpSubmissionRequest: # Conceptual Schema for ZKP Layer
      type: object
      properties:
        claimType:
          type: string
          description: >
            A standardized string identifying the type of claim being proven (e.g., "material_compliance_svhc_lead_less_0.1", "ethical_sourcing_cobalt_conflict_free_region_x").
            This helps the verifier understand what is being attested to.
          example: "material_compliance_svhc_lead_less_0.1"
        proofData:
          type: string
          format: byte # Typically base64 encoded ZKP data
          description: The actual Zero-Knowledge Proof data, specific to the ZKP scheme used.
          example: "0xabcdef123456..."
        publicInputs:
          type: object
          additionalProperties: true
          nullable: true
          description: >
            Any public inputs that were used to generate the proof and are needed by the verifier (e.g., a commitment to the private data, a specific product batch ID).
            The structure of this object is highly dependent on the ZKP scheme.
          example: { "productBatchId": "BATCH_XYZ123", "svhcCasNumber": "7439-92-1" }
      required:
        - claimType
        - proofData
    ZkpSubmissionResponse: # Conceptual Schema for ZKP Layer
      type: object
      properties:
        dppId:
          type: string
          description: The DPP ID for which the proof was submitted.
        proofId:
          type: string
          description: A unique identifier for the submitted proof, assigned by the Norruva platform.
          example: "zkp_proof_mock_123abc"
        status:
          type: string
          enum: ["acknowledged", "pending_verification", "failed_initial_check"]
          description: The initial status of the proof submission. "acknowledged" means received, not yet validated.
          example: "acknowledged"
        message:
          type: string
          description: A message regarding the submission status.
          example: "ZKP submission received and queued for conceptual verification."
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the submission.
    ZkpVerificationResponse: # Conceptual Schema for ZKP Layer
      type: object
      properties:
        dppId:
          type: string
          description: The DPP ID for which the claim was queried.
        claimType:
          type: string
          description: The type of claim that was queried for verification.
          example: "material_compliance_svhc_lead_less_0.1"
        isVerified:
          type: boolean
          description: >
            True if a valid (mock) ZKP for this claim type is associated with the DPP, false otherwise.
            This is a mock response; actual ZKP verification is complex.
        proofId:
          type: string
          nullable: true
          description: The ID of the proof if verification was successful.
          example: "zkp_proof_mock_123abc"
        verifiedAt:
          type: string
          format: date-time
          nullable: true
          description: Timestamp of when this (mock) verification check was performed.
        message:
          type: string
          description: A message regarding the verification outcome.
          example: "Mock ZKP for claim 'material_compliance_svhc_lead_less_0.1' is considered valid for this DPP."
    BatteryRegulationDetails: 
      type: object
      properties:
        status:
          type: string
          enum: ["compliant", "non_compliant", "pending", "not_applicable"]
          nullable: true
        batteryChemistry:
          type: string
          nullable: true
        batteryPassportId:
          type: string
          nullable: true
        carbonFootprint:
          $ref: '#/components/schemas/CarbonFootprintData'
          nullable: true
        recycledContent:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/RecycledContentData'
        stateOfHealth:
          $ref: '#/components/schemas/StateOfHealthData'
          nullable: true
        vcId:
          type: string
          nullable: true
    CarbonFootprintData: 
      type: object
      properties:
        value:
          type: number
          format: float
          nullable: true
        unit:
          type: string
          nullable: true
        calculationMethod:
          type: string
          nullable: true
        vcId:
          type: string
          nullable: true
    RecycledContentData: 
      type: object
      properties:
        material:
          type: string
          nullable: true
        percentage:
          type: number
          format: float
          nullable: true
        vcId:
          type: string
          nullable: true
    StateOfHealthData: 
      type: object
      properties:
        value:
          type: number
          format: float
          nullable: true
        unit:
          type: string
          nullable: true
        measurementDate:
          type: string
          format: date-time
          nullable: true
        vcId:
          type: string
          nullable: true
    ScipNotificationDetails: 
      type: object
      properties:
        status:
          type: string
          enum: ['Notified', 'Pending Notification', 'Not Required', 'Error', 'N/A']
          nullable: true
        notificationId:
          type: string
          nullable: true
        svhcListVersion:
          type: string
          nullable: true
        submittingLegalEntity:
          type: string
          nullable: true
        articleName:
          type: string
          nullable: true
        primaryArticleId:
          type: string
          nullable: true
        safeUseInstructionsLink:
          type: string
          format: url
          nullable: true
        lastChecked:
          type: string
          format: date-time
          nullable: true
    EuCustomsDataDetails: 
      type: object
      properties:
        status:
          type: string
          enum: ['Verified', 'Pending Documents', 'Mismatch', 'Cleared', 'N/A']
          nullable: true
        declarationId:
          type: string
          nullable: true
        hsCode:
          type: string
          nullable: true
        countryOfOrigin:
          type: string
          format: "ISO3166-1-Alpha-2"
          nullable: true
        netWeightKg:
          type: number
          format: float
          nullable: true
        grossWeightKg:
          type: number
          format: float
          nullable: true
        customsValuation:
          type: object
          nullable: true
          properties:
            value:
              type: number
              format: float
              nullable: true
            currency:
              type: string
              format: "ISO4217"
              nullable: true
        lastChecked:
          type: string
          format: date-time
          nullable: true
    TextileInformation: 
      type: object
      properties:
        fiberComposition:
          type: array
          items:
            type: object
            properties:
              fiberName:
                type: string
              percentage:
                type: number
                format: float
                nullable: true
            required:
              - fiberName
          nullable: true
        countryOfOriginLabeling:
          type: string
          nullable: true
        careInstructionsUrl:
          type: string
          format: url
          nullable: true
        isSecondHand:
          type: boolean
          nullable: true
    ConstructionProductInformation: 
      type: object
      properties:
        declarationOfPerformanceId:
          type: string
          nullable: true
        ceMarkingDetailsUrl:
          type: string
          format: url
          nullable: true
        intendedUseDescription:
          type: string
          nullable: true
        essentialCharacteristics:
          type: array
          items:
            type: object
            properties:
              characteristicName:
                type: string
              value:
                type: string
              unit:
                type: string
                nullable: true
              testMethod:
                type: string
                nullable: true
            required:
              - characteristicName
              - value
          nullable: true
security:
  - ApiKeyAuth: []
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: Authorization
      description: API key for authentication. Provide as 'Bearer YOUR_API_KEY'.


    